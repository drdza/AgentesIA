{"request_id": "dc05337f-de81-4dca-9b85-af9e8bb979f4", "client_ip": "127.0.0.1", "timestamp": "2025-06-06T16:44:26.372756", "status": "fails", "original_question": "¿Dime cual es el porcentaje de tickets atendidos por cada unidad de negocio en el 2025?", "enhanced_question": "¿Podrías calcular el porcentaje de tickets atendidos por cada unidad de negocio durante el año 2025? \n\n", "flow": "", "generated_sql": "WITH tickets_atendidos_en_tiempo AS (\n  SELECT\n    unidad_negocio,\n    CAST(COUNT(*) AS DECIMAL) AS tickets_atendidos_en_tiempo\n  FROM ft_tickets_ia\n  WHERE\n    EXTRACT(YEAR FROM fecha_cierre) = 2025\n    AND estatus_atencion = 'TIEMPO'\n    AND estatus_ticket = 'ATENDIDO'\n  GROUP BY\n    unidad_negocio\n), tickets_atendidos_totales AS (\n  SELECT\n    unidad_negocio,\n    CAST(COUNT(*) AS DECIMAL) AS tickets_atendidos_totales\n  FROM ft_tickets_ia\n  WHERE\n    EXTRACT(YEAR FROM fecha_cierre) = 2025 AND estatus_ticket = 'ATENDIDO'\n  GROUP BY\n    unidad_negocio\n)\nSELECT\n  unidad_negocio,\n  CAST((\n    tickets_atendidos_en_tiempo.tickets_atendidos_en_tiempo / tickets_atendidos_totales.tickets_atendidos_totales * 100\n  ) AS DECIMAL(10, 2)) AS porcentaje_tickets_atendidos_en_tiempo\nFROM tickets_atendidos_en_tiempo\nJOIN tickets_atendidos_totales\n  ON tickets_atendidos_en_tiempo.unidad_negocio = tickets_atendidos_totales.unidad_negocio", "result": {"error": "la referencia a la columna «unidad_negocio» es ambigua\nLINE 23:   unidad_negocio,\n           ^\n"}, "model": "mistral & gemma", "domain": "tickets", "duration": 27.0, "tags": []}
{"request_id": "ca14de03-c754-4b39-97b6-112cb0fa7388", "client_ip": "127.0.0.1", "timestamp": "2025-06-06T16:46:45.622372", "status": "fails", "original_question": "¿Que porcentaje representa para cada unidad de negocios los tickets atendidos en el 2025?", "enhanced_question": "¿Podrías calcular el porcentaje que representan los tickets atendidos para cada unidad de negocios durante el año 2025? \n", "flow": "", "generated_sql": "WITH tickets_atendidos_por_unidad_negocio AS (\n  SELECT\n    unidad_negocio,\n    CAST(COUNT(*) AS DECIMAL) AS tickets_atendidos\n  FROM ft_tickets_ia\n  WHERE\n    EXTRACT(YEAR FROM fecha_cierre) = 2025 AND estatus_ticket = 'ATENDIDO'\n  GROUP BY\n    unidad_negocio\n), tickets_atendidos_totales AS (\n  SELECT\n    CAST(COUNT(*) AS DECIMAL) AS tickets_atendidos_totales\n  FROM ft_tickets_ia\n  WHERE\n    EXTRACT(YEAR FROM fecha_cierre) = 2025 AND estatus_ticket = 'ATENDIDO'\n)\nSELECT\n  unidad_negocio,\n  CAST((\n    tickets_atendidos.tickets_atendidos / tickets_atendidos_totales.tickets_atendidos_totales * 100\n  ) AS DECIMAL(10, 2)) AS porcentaje_tickets_atendidos\nFROM tickets_atendidos_por_unidad_negocio, tickets_atendidos_totales\nORDER BY\n  porcentaje_tickets_atendidos DESC", "result": {"error": "falta una entrada para la tabla «tickets_atendidos» en la cláusula FROM\nLINE 20:     tickets_atendidos.tickets_atendidos / tickets_atendidos_...\n             ^\n"}, "model": "mistral & gemma", "domain": "tickets", "duration": 22.69, "tags": []}
