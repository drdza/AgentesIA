{"request_id": "0a1e69ea-9588-405f-8b8e-afb6194fa5c5", "client_ip": "127.0.0.1", "timestamp": "2025-06-23T17:41:48.806241", "status": "success", "original_question": "Agrupa por día del mes (del 1 al 30) la cantidad de tickets atendidos, en proceso y fuera de tiempo considerando solo 2025", "enhanced_question": "Contar el número de tickets atendidos, en proceso y fuera de tiempo por cada día del mes (del 1 al 30) en el año 2025.", "flow": "", "generated_sql": "WITH tickets_dia_mes_ano AS (\n  SELECT\n    EXTRACT(DAY FROM fecha_registro) AS dia,\n    EXTRACT(MONTH FROM fecha_registro) AS mes,\n    EXTRACT(YEAR FROM fecha_registro) AS ano,\n    fecha_cierre,\n    estatus_ticket,\n    folio_ticket\n  FROM ft_tickets_ia\n  WHERE EXTRACT(YEAR FROM fecha_registro) = 2025\n), tickets_atendidos AS (\n  SELECT\n    dia,\n    mes,\n    ano,\n    COUNT(*) FILTER (WHERE fecha_cierre IS NOT NULL) AS tickets_atendidos\n  FROM tickets_dia_mes_ano\n  GROUP BY dia, mes, ano\n), tickets_en_proceso AS (\n  SELECT\n    dia,\n    mes,\n    ano,\n    COUNT(*) FILTER (WHERE fecha_cierre IS NULL AND estatus_ticket <> 'CANCELADO') AS tickets_en_proceso\n  FROM tickets_dia_mes_ano\n  GROUP BY dia, mes, ano\n), tickets_fuera_de_tiempo AS (\n  SELECT\n    dia,\n    mes,\n    ano,\n    COUNT(*) FILTER (WHERE fecha_cierre IS NULL AND estatus_atencion = 'FUERA DE TIEMPO') AS tickets_fuera_de_tiempo\n  FROM (\n    SELECT\n      tickets_dia_mes_ano.*,\n      CASE\n        WHEN tiempo_atencion > tiempo_sla_servicio THEN 'FUERA DE TIEMPO'\n        WHEN tiempo_atencion >= tiempo_sla_servicio THEN 'EN TIEMPO'\n        ELSE 'POR VENCER'\n      END AS estatus_atencion\n    FROM tickets_dia_mes_ano\n  ) AS tickets_con_estatus_atencion\n  GROUP BY dia, mes, ano\nSELECT\n  mes,\n  ano,\n  dia,\n  tickets_atendidos.tickets_atendidos,\n  tickets_en_proceso.tickets_en_proceso,\n  tickets_fuera_de_tiempo.tickets_fuera_de_tiempo\nFROM\n  (SELECT DISTINCT EXTRACT(MONTH FROM fecha_registro) AS mes, EXTRACT(YEAR FROM fecha_registro) AS ano FROM ft_tickets_ia WHERE EXTRACT(YEAR FROM fecha_registro) = 2025) AS meses_ano,\n  tickets_atendidos,\n  tickets_en_proceso,\n  tickets_fuera_de_tiempo\nORDER BY mes, ano, dia;", "result": {"error": "El SQL no pudo ser procesado correctamente."}, "model": "", "domain": "tickets", "duration": 22.07, "tags": []}
{"request_id": "85ae427a-b1b7-4095-9613-89341a5156d9", "client_ip": "127.0.0.1", "timestamp": "2025-06-23T17:49:46.638107", "status": "success", "original_question": "Extrae el día de cada fecha (de 1 a 31), ignora el mes y agrupa por eso para realizar el conteo de tickets atendidos, en proceso y fuera de tiempo.", "enhanced_question": "Contar el número de tickets atendidos, en proceso y fuera de tiempo por cada día del año actual, ignorando el mes.", "flow": "", "generated_sql": "SELECT\n  DATE_TRUNC('DAY', \"fecha_registro\") AS \"fecha\",\n  COUNT(*) FILTER(WHERE\n    \"estatus_ticket\" = 'ATENDIDO') AS \"tickets_atendidos\",\n  COUNT(*) FILTER(WHERE\n    \"estatus_ticket\" = 'EN PROCESO' AND \"fecha_cierre\" IS NULL) AS \"tickets_en_proceso\",\n  COUNT(*) FILTER(WHERE\n    \"estatus_ticket\" = 'EN PROCESO' AND \"tiempo_atencion\" > \"tiempo_sla_servicio\") AS \"tickets_fuera_de_tiempo\"\nFROM \"ft_tickets_ia\"\nWHERE\n  \"anio_registro\" = DATE_PART('YEAR', CURRENT_DATE)\nGROUP BY\n  DATE_TRUNC('DAY', \"fecha_registro\")\nORDER BY\n  DATE_TRUNC('DAY', \"fecha_registro\") NULLS FIRST", "result": {"columns": ["fecha", "tickets_atendidos", "tickets_en_proceso", "tickets_fuera_de_tiempo"], "rows": [["2025-01-02 00:00:00-06:00", 91, 0, 0], ["2025-01-03 00:00:00-06:00", 81, 0, 0], ["2025-01-04 00:00:00-06:00", 29, 0, 0], ["2025-01-05 00:00:00-06:00", 1, 0, 0], ["2025-01-06 00:00:00-06:00", 66, 0, 0], ["2025-01-07 00:00:00-06:00", 110, 0, 0], ["2025-01-08 00:00:00-06:00", 102, 0, 0], ["2025-01-09 00:00:00-06:00", 95, 0, 0], ["2025-01-10 00:00:00-06:00", 113, 1, 1], ["2025-01-11 00:00:00-06:00", 36, 0, 0], ["2025-01-13 00:00:00-06:00", 72, 0, 0], ["2025-01-14 00:00:00-06:00", 118, 0, 0], ["2025-01-15 00:00:00-06:00", 118, 0, 0], ["2025-01-16 00:00:00-06:00", 89, 0, 0], ["2025-01-17 00:00:00-06:00", 131, 0, 0], ["2025-01-18 00:00:00-06:00", 48, 2, 2], ["2025-01-19 00:00:00-06:00", 1, 0, 0], ["2025-01-20 00:00:00-06:00", 86, 0, 0], ["2025-01-21 00:00:00-06:00", 78, 0, 0], ["2025-01-22 00:00:00-06:00", 87, 0, 0], ["2025-01-23 00:00:00-06:00", 108, 0, 0], ["2025-01-24 00:00:00-06:00", 104, 0, 0], ["2025-01-25 00:00:00-06:00", 37, 2, 2], ["2025-01-27 00:00:00-06:00", 87, 0, 0], ["2025-01-28 00:00:00-06:00", 164, 0, 0], ["2025-01-29 00:00:00-06:00", 113, 0, 0], ["2025-01-30 00:00:00-06:00", 88, 0, 0], ["2025-01-31 00:00:00-06:00", 102, 0, 0], ["2025-02-01 00:00:00-06:00", 41, 0, 0], ["2025-02-02 00:00:00-06:00", 1, 0, 0], ["2025-02-03 00:00:00-06:00", 19, 0, 0], ["2025-02-04 00:00:00-06:00", 114, 0, 0], ["2025-02-05 00:00:00-06:00", 134, 0, 0], ["2025-02-06 00:00:00-06:00", 83, 0, 0], ["2025-02-07 00:00:00-06:00", 83, 0, 0], ["2025-02-08 00:00:00-06:00", 50, 0, 0], ["2025-02-10 00:00:00-06:00", 92, 0, 0], ["2025-02-11 00:00:00-06:00", 103, 0, 0], ["2025-02-12 00:00:00-06:00", 98, 0, 0], ["2025-02-13 00:00:00-06:00", 101, 0, 0], ["2025-02-14 00:00:00-06:00", 73, 0, 0], ["2025-02-15 00:00:00-06:00", 75, 0, 0], ["2025-02-17 00:00:00-06:00", 131, 0, 0], ["2025-02-18 00:00:00-06:00", 88, 0, 0], ["2025-02-19 00:00:00-06:00", 78, 0, 0], ["2025-02-20 00:00:00-06:00", 111, 0, 0], ["2025-02-21 00:00:00-06:00", 95, 0, 0], ["2025-02-22 00:00:00-06:00", 43, 0, 0], ["2025-02-23 00:00:00-06:00", 1, 0, 0], ["2025-02-24 00:00:00-06:00", 93, 0, 0], ["2025-02-25 00:00:00-06:00", 87, 0, 0], ["2025-02-26 00:00:00-06:00", 74, 0, 0], ["2025-02-27 00:00:00-06:00", 88, 0, 0], ["2025-02-28 00:00:00-06:00", 66, 0, 0], ["2025-03-01 00:00:00-06:00", 68, 0, 0], ["2025-03-03 00:00:00-06:00", 123, 0, 0], ["2025-03-04 00:00:00-06:00", 106, 0, 0], ["2025-03-05 00:00:00-06:00", 88, 0, 0], ["2025-03-06 00:00:00-06:00", 83, 0, 0], ["2025-03-07 00:00:00-06:00", 112, 0, 0], ["2025-03-08 00:00:00-06:00", 66, 0, 0], ["2025-03-10 00:00:00-06:00", 92, 0, 0], ["2025-03-11 00:00:00-06:00", 84, 0, 0], ["2025-03-12 00:00:00-06:00", 135, 0, 0], ["2025-03-13 00:00:00-06:00", 74, 0, 0], ["2025-03-14 00:00:00-06:00", 73, 0, 0], ["2025-03-15 00:00:00-06:00", 44, 0, 0], ["2025-03-16 00:00:00-06:00", 1, 0, 0], ["2025-03-17 00:00:00-06:00", 17, 0, 0], ["2025-03-18 00:00:00-06:00", 143, 0, 0], ["2025-03-19 00:00:00-06:00", 82, 0, 0], ["2025-03-20 00:00:00-06:00", 125, 0, 0], ["2025-03-21 00:00:00-06:00", 72, 0, 0], ["2025-03-22 00:00:00-06:00", 65, 0, 0], ["2025-03-23 00:00:00-06:00", 1, 0, 0], ["2025-03-24 00:00:00-06:00", 108, 0, 0], ["2025-03-25 00:00:00-06:00", 120, 0, 0], ["2025-03-26 00:00:00-06:00", 72, 0, 0], ["2025-03-27 00:00:00-06:00", 93, 0, 0], ["2025-03-28 00:00:00-06:00", 81, 0, 0], ["2025-03-29 00:00:00-06:00", 50, 0, 0], ["2025-03-30 00:00:00-06:00", 2, 0, 0], ["2025-03-31 00:00:00-06:00", 83, 0, 0], ["2025-04-01 00:00:00-06:00", 112, 2, 2], ["2025-04-02 00:00:00-06:00", 102, 0, 0], ["2025-04-03 00:00:00-06:00", 80, 0, 0], ["2025-04-04 00:00:00-06:00", 110, 1, 1], ["2025-04-05 00:00:00-06:00", 81, 0, 0], ["2025-04-06 00:00:00-06:00", 19, 0, 0], ["2025-04-07 00:00:00-06:00", 127, 0, 0], ["2025-04-08 00:00:00-06:00", 115, 0, 0], ["2025-04-09 00:00:00-06:00", 90, 0, 0], ["2025-04-10 00:00:00-06:00", 104, 0, 0], ["2025-04-11 00:00:00-06:00", 78, 0, 0], ["2025-04-12 00:00:00-06:00", 53, 0, 0], ["2025-04-14 00:00:00-06:00", 4, 0, 0], ["2025-04-15 00:00:00-06:00", 3, 0, 0], ["2025-04-16 00:00:00-06:00", 1, 0, 0], ["2025-04-21 00:00:00-06:00", 149, 0, 0], ["2025-04-22 00:00:00-06:00", 99, 0, 0], ["2025-04-23 00:00:00-06:00", 120, 0, 0], ["2025-04-24 00:00:00-06:00", 99, 0, 0], ["2025-04-25 00:00:00-06:00", 98, 0, 0], ["2025-04-26 00:00:00-06:00", 44, 1, 0], ["2025-04-27 00:00:00-06:00", 1, 0, 0], ["2025-04-28 00:00:00-06:00", 138, 1, 1], ["2025-04-29 00:00:00-06:00", 160, 0, 0], ["2025-04-30 00:00:00-06:00", 100, 0, 0], ["2025-05-01 00:00:00-06:00", 24, 0, 0], ["2025-05-02 00:00:00-06:00", 96, 0, 0], ["2025-05-03 00:00:00-06:00", 53, 0, 0], ["2025-05-05 00:00:00-06:00", 117, 0, 0], ["2025-05-06 00:00:00-06:00", 109, 0, 0], ["2025-05-07 00:00:00-06:00", 132, 0, 0], ["2025-05-08 00:00:00-06:00", 94, 0, 0], ["2025-05-09 00:00:00-06:00", 70, 2, 0], ["2025-05-10 00:00:00-06:00", 28, 0, 0], ["2025-05-12 00:00:00-06:00", 75, 0, 0], ["2025-05-13 00:00:00-06:00", 89, 1, 1], ["2025-05-14 00:00:00-06:00", 99, 0, 0], ["2025-05-15 00:00:00-06:00", 117, 0, 0], ["2025-05-16 00:00:00-06:00", 78, 0, 0], ["2025-05-17 00:00:00-06:00", 47, 0, 0], ["2025-05-19 00:00:00-06:00", 109, 0, 0], ["2025-05-20 00:00:00-06:00", 141, 0, 0], ["2025-05-21 00:00:00-06:00", 127, 1, 1], ["2025-05-22 00:00:00-06:00", 100, 0, 0], ["2025-05-23 00:00:00-06:00", 95, 0, 0], ["2025-05-24 00:00:00-06:00", 81, 0, 0], ["2025-05-25 00:00:00-06:00", 1, 0, 0], ["2025-05-26 00:00:00-06:00", 98, 0, 0], ["2025-05-27 00:00:00-06:00", 87, 0, 0], ["2025-05-28 00:00:00-06:00", 93, 0, 0], ["2025-05-29 00:00:00-06:00", 96, 0, 0], ["2025-05-30 00:00:00-06:00", 112, 0, 0], ["2025-05-31 00:00:00-06:00", 43, 1, 1], ["2025-06-02 00:00:00-06:00", 92, 0, 0], ["2025-06-03 00:00:00-06:00", 96, 0, 0], ["2025-06-04 00:00:00-06:00", 109, 1, 0], ["2025-06-05 00:00:00-06:00", 143, 1, 1], ["2025-06-06 00:00:00-06:00", 154, 2, 0], ["2025-06-07 00:00:00-06:00", 59, 0, 0], ["2025-06-08 00:00:00-06:00", 1, 0, 0], ["2025-06-09 00:00:00-06:00", 108, 3, 3], ["2025-06-10 00:00:00-06:00", 95, 2, 1], ["2025-06-11 00:00:00-06:00", 88, 6, 3], ["2025-06-12 00:00:00-06:00", 97, 0, 0], ["2025-06-13 00:00:00-06:00", 116, 2, 2], ["2025-06-14 00:00:00-06:00", 45, 0, 0], ["2025-06-15 00:00:00-06:00", 2, 0, 0], ["2025-06-16 00:00:00-06:00", 101, 2, 2], ["2025-06-17 00:00:00-06:00", 108, 2, 1], ["2025-06-18 00:00:00-06:00", 191, 20, 7], ["2025-06-19 00:00:00-06:00", 117, 11, 11], ["2025-06-20 00:00:00-06:00", 107, 26, 16], ["2025-06-21 00:00:00-06:00", 45, 15, 6], ["2025-06-23 00:00:00-06:00", 63, 53, 7]]}, "model": "", "domain": "tickets", "duration": 9.9, "tags": []}
{"request_id": "89998fe2-4568-42ca-b368-5ff1d70eb98e", "client_ip": "127.0.0.1", "timestamp": "2025-06-23T17:51:57.954718", "status": "success", "original_question": "Cuantos tickets están en proceso por cada departamento y area", "enhanced_question": "Necesito contar el número de tickets que están en proceso por cada departamento y área.", "flow": "", "generated_sql": "SELECT\n  \"departamento_colaborador_asignado\" AS \"Departamento\",\n  \"area_colaborador_asignado\" AS \"Área\",\n  COUNT(*) AS \"Tickets En Proceso\"\nFROM \"ft_tickets_ia\"\nWHERE\n  \"estatus_ticket\" = 'EN PROCESO' AND \"fecha_cierre\" IS NULL\nGROUP BY\n  \"departamento_colaborador_asignado\",\n  \"area_colaborador_asignado\"\nORDER BY\n  \"departamento_colaborador_asignado\" NULLS FIRST,\n  \"area_colaborador_asignado\" NULLS FIRST", "result": {"columns": ["Departamento", "Área", "Tickets En Proceso"], "rows": [["ADMINISTRACIÓN I&N", "ADMINISTRACIÓN I&N", 10], ["ADMINISTRACIÓN I&N", "ALMACÉN I&N", 3], ["AUDITORÍA CORPORATIVA DE VENTAS", "AUDITORÍA CORPORATIVA DE VENTAS", 3], ["CIBERSEGURIDAD", "CIBERSEGURIDAD", 1], ["DESARROLLO", "DIVISIÓN INNOVACIÓN", 3], ["GESTIÓN DE SERVICIOS TI", "CENTRO DE ATENCION A USUARIOS", 21], ["GESTIÓN DE SERVICIOS TI", "GESTIÓN DE APLICATIVOS", 5], ["GESTIÓN DE SERVICIOS TI", "GESTIÓN DE SERVICIOS TI", 19], ["GESTIÓN DE SERVICIOS TI", "SOPORTE FORANEOS", 19], ["GESTIÓN DE SERVICIOS TI", "SOPORTE TÉCNICO", 54], ["PMO", "PMO", 3], ["REDES Y TELECOMUNICACIONES", "REDES Y TELECOMUNICACIONES", 12], ["SERVIDORES Y PLATAFORMAS", "SERVIDORES Y PLATAFORMAS", 11]]}, "model": "", "domain": "tickets", "duration": 6.88, "tags": []}
