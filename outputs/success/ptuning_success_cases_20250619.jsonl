{"request_id": "fee2fbd4-31ab-4377-9cf3-b0650f55142e", "client_ip": "127.0.0.1", "timestamp": "2025-06-19T10:35:18.681411", "status": "success", "original_question": "¿Cuántos tickets se han abierto esta semana y cuántos se han atendido ya?", "enhanced_question": "dime cuántos tickets se han abierto en la última semana y cuántos se han resuelto.", "flow": "", "generated_sql": "SELECT\n  DATE_PART('week', CURRENT_DATE - INTERVAL '1 WEEK') AS \"semana_pasada\",\n  COUNT(*) FILTER(WHERE\n    \"estatus_ticket\" <> 'CANCELADO') AS \"tickets_abiertos\",\n  COUNT(*) FILTER(WHERE\n    \"estatus_ticket\" = 'ATENDIDO'\n    OR (\n      NOT \"fecha_cierre\" IS NULL AND NOT \"estatus_ticket\" IN ('CANCELADO')\n    )) AS \"tickets_atendidos\"\nFROM \"ft_tickets_ia\"\nWHERE\n  DATE_TRUNC('WEEK', \"fecha_registro\") = DATE_TRUNC('WEEK', CURRENT_DATE - INTERVAL '1 WEEK')", "result": {"columns": ["semana_pasada", "tickets_abiertos", "tickets_atendidos"], "rows": [[24.0, 565, 540]]}, "model": "", "domain": "tickets", "duration": 7.59, "tags": []}
{"request_id": "7cc6d614-2452-4c6c-8272-a644bb49bc3d", "client_ip": "127.0.0.1", "timestamp": "2025-06-19T10:35:56.241913", "status": "success", "original_question": "¿Cuál fue el promedio de tickets registrados por mes en el 2024?", "enhanced_question": "Muestra el promedio de tickets registrados por mes en el año 2024.", "flow": "", "generated_sql": "WITH \"tickets_mensuales\" AS (\n  SELECT\n    EXTRACT(MONTH FROM \"fecha_registro\") AS \"mes\",\n    COUNT(*) FILTER(WHERE\n      \"estatus_ticket\" <> 'CANCELADO') AS \"tickets_por_mes\"\n  FROM \"ft_tickets_ia\"\n  WHERE\n    EXTRACT(YEAR FROM \"fecha_registro\") = 2024\n  GROUP BY\n    EXTRACT(MONTH FROM \"fecha_registro\")\n)\nSELECT\n  AVG(\"tickets_por_mes\") AS \"promedio_mensual_2024\"\nFROM \"tickets_mensuales\"", "result": {"columns": ["promedio_mensual_2024"], "rows": [["1867.6666666666666667"]]}, "model": "", "domain": "tickets", "duration": 8.41, "tags": []}
{"request_id": "52fc29c5-080c-42e9-b014-cd871863918f", "client_ip": "127.0.0.1", "timestamp": "2025-06-19T10:36:25.002467", "status": "success", "original_question": "¿Cuántos tickets fueron cerrados más de 3 días después de su registro?", "enhanced_question": "Cantidad de tickets cerrados con un retraso de más de 3 días desde su fecha de registro.", "flow": "", "generated_sql": "SELECT\n  COUNT(*)\nFROM \"ft_tickets_ia\"\nWHERE\n  \"estatus_ticket\" = 'ATENDIDO'\n  AND NOT \"fecha_cierre\" IS NULL\n  AND DATE_PART('day', \"fecha_cierre\") > DATE_PART('day', \"fecha_registro\") + 3", "result": {"columns": ["count"], "rows": [[1809]]}, "model": "", "domain": "tickets", "duration": 7.24, "tags": []}
